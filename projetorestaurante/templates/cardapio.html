{% extends "base.html" %}
{% load static %}
{% load i18n %} {% block title %}Nosso Cardápio - Chama do Cerrado{% endblock %}

{% block content %}
<div class="container my-5">
    <h1 class="text-center mb-5">Nosso Cardápio</h1>

    {% for categoria in categorias %}
        <div class="mb-5">
            <h2 class="h3">{{ categoria.nome }}</h2>
            <hr>
            <div class="row g-4">
                
                {% for item in categoria.itens.all %} {# A view já filtrou os itens ativos #}
                <div class="col-md-6 col-lg-4">
                    <div class="card card-custom h-100"> {# h-100 para mesma altura #}
                        
                        {% if item.imagem %}
                            <img src="{{ item.imagem.url }}" class="card-img-top" alt="{{ item.nome }}" style="height: 250px; object-fit: cover;">
                        {% else %}
                            <img src="{% static 'img/placeholder.png' %}" class="card-img-top" alt="Imagem não disponível" style="height: 250px; object-fit: cover; opacity: 0.7;">
                        {% endif %}
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">{{ item.nome }}</h5>
                            {% if item.descricao %}
                                <p class="card-text">{{ item.descricao }}</p>
                            {% endif %}
                            <h5 class="mt-auto" style="color: var(--cliente-destaque, #8B4513);">
                                R$ {{ item.preco|stringformat:".2f" }}
                            </h5>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col">
                    <p class="text-muted">Nenhum item disponível nesta categoria no momento.</p>
                </div>
                {% endfor %} </div> </div> {% empty %}
        <p class="text-muted text-center">Nosso cardápio está sendo atualizado. Volte em breve!</p>
    {% endfor %} </div>
{% endblock %}